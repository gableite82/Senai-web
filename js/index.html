<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Estacionamento</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>

    <div class="container">
        <h2>Cadastro de Estacionamento</h2>

        <form id="formCadastro">

            <label for="nomeProprietario">Nome do Proprietário:</label>
            <input type="text" id="nomeProprietario" name="nomeProprietario" required>

            <label for="apartamento">Número do Apartamento:</label>
            <input type="text" id="apartamento" name="apartamento" required>

            <label for="bloco">Bloco do Apartamento:</label>
            <input type="text" id="bloco" name="bloco" required>

            <label for="placa">Placa do Veículo:</label>
            <input type="text" id="placa" name="placa" required>

            <label for="modelo">Modelo do Veículo:</label>
            <input type="text" id="modelo" name="modelo" required>

            <label for="vaga">Número Vaga Estacionamento:</label>
            <input type="text" id="vaga" name="vaga" required>

            
        </form>
        <button onclick="salvarCadastro()">Salvar</button>
        <button onclick="location.href='vagas-cadastradas.html'">Vagas Ocupadas</button>
        <button onclick="location.href='vagas-disponiveis.html'">Vagas Disponíveis</button>
        <button onclick="resetarCadastros()">Limpar Cadastros</button>
    </div>
    <div>   
        <table id="tabelaVagasCadastradas">
            
        </table>
    </div>

    <script>
        function salvarCadastro() {

            var nomeProprietario = document.getElementById('nomeProprietario').value;
            var numeroApartamento = document.getElementById('numeroApartamento').value;
            var blocoApartamento = document.getElementById('blocoApartamento').value;
            var placaVeiculo = document.getElementById('placaVeiculo').value;
            var modeloVeiculo = document.getElementById('modeloVeiculo').value;
            var vagaVeiculo = document.getElementById('vagaVeiculo').value;

            console.log("Nome do Proprietário:", nomeProprietario);
            console.log("Número do Apartamento:", numeroApartamento);
            console.log("Bloco do Apartamento:", blocoApartamento);
            console.log("Placa do Veículo:", placaVeiculo);
            console.log("Modelo do Veículo:", modeloVeiculo);
            console.log("Número da Vaga de Estacionamento:", vagaVeiculo);

            var cadastro = {
                nomeProprietario: nomeProprietario,
                numeroApartamento: numeroApartamento,
                blocoApartamento: blocoApartamento,
                placaVeiculo: placaVeiculo,
                modeloVeiculo: modeloVeiculo,
                vagaVeiculo: vagaVeiculo}

                
            var vagasCadastradas = JSON.parse(localStorage.getItem('vagasCadastradas')) || [];
                vagasCadastradas.push(cadastro);
                localStorage.setItem('vagasCadastradas', JSON.stringify(vagasCadastradas));
                alert("Cadastro realizado com sucesso!");
        }
        
        function exibirVagasCadastradas() {
            var tbody = document.querySelector("#tabelaVagasCadastradas tbody");
            vagasCadastradas.forEach(function(vaga) {
                var newRow = tbody.insertRow();
                newRow.innerHTML = `<td>${vaga.nomeProprietario}</td><td>${vaga.numeroApartamento}</td><td>${vaga.blocoApartamento}</td><td>${vaga.placaVeiculo}</td><td>${vaga.modeloVeiculo}</td><td>${vaga.vagaVeiculo}</td>`;
        listaVagasDisponiveis.innerHTML = '';           
            });
        }

        window.onload = function() {
            exibirVagasCadastradas();
        };

        function resetarCadastros() {
            localStorage.removeItem('vagasCadastradas');
            location.reload();
        }
    </script>    
</body>
</html>